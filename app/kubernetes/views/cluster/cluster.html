<kubernetes-view-header title="Cluster" state="kubernetes.cluster" view-ready="ctrl.state.viewReady">
  Cluster information
</kubernetes-view-header>

<kubernetes-view-loading view-ready="ctrl.state.viewReady"></kubernetes-view-loading>

<div ng-if="ctrl.state.viewReady">
  <div class="row" ng-if="ctrl.resourceReservation && ctrl.isAdmin">
    <div class="col-sm-12">
      <rd-widget>
        <rd-widget-body classes="no-padding">
          <uib-tabset active="ctrl.state.activeTab" justified="true" type="pills">
            <uib-tab index="0" classes="btn-sm" select="ctrl.selectTab(0)">
              <uib-tab-heading> <i class="fa fa-file-code space-right" aria-hidden="true"></i> Cluster Resource Reservation </uib-tab-heading>
              <form class="form-horizontal" style="padding: 20px;">
                <kubernetes-resource-reservation
                  cpu="ctrl.resourceReservation.CPU"
                  cpu-limit="ctrl.CPULimit"
                  memory="ctrl.resourceReservation.Memory"
                  memory-limit="ctrl.MemoryLimit"
                  description="Resource reservation represents the total amount of resource assigned to all the applications inside the cluster."
                >
                </kubernetes-resource-reservation>
              </form>
            </uib-tab>
            <uib-tab index="1" classes="btn-sm" select="ctrl.selectTab(1)">
              <uib-tab-heading> <i class="fa fa-file-code space-right" aria-hidden="true"></i> Cluster Status </uib-tab-heading>
              <div class="row" style="padding: 20px;">
                <table class="table col-sm-6">
                  <tbody>
                    <tr ng-repeat="status in ctrl.componentStatuses">
                      <td>
                        {{ status.metadata.name }}
                      </td>
                      <td>
                        {{ status.conditions[0].type }}
                      </td>
                      <td>
                        {{ status.conditions[0].message }}
                      </td>
                      <td>
                        {{ status.conditions[0].error ? status.conditions[0].error : '-' }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </uib-tab>
          </uib-tabset>
        </rd-widget-body>
      </rd-widget>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-12">
      <kubernetes-nodes-datatable
        title-text="Nodes"
        title-icon="fa-hdd"
        dataset="ctrl.nodes"
        table-key="kubernetes.nodes"
        order-by="Name"
        refresh-callback="ctrl.getNodes"
        is-admin="ctrl.isAdmin"
      ></kubernetes-nodes-datatable>
    </div>
  </div>
</div>
